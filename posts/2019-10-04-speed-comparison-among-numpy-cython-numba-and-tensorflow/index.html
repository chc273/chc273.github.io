<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Speed comparison among numpy, cython, numba and tensorflow 2.0 | Chi's blog</title><meta name=keywords content="cython,numba,tensorflow,numpy"><meta name=description content="Speed comparison among numpy, cython, numba and tensorflow 2.0
Recently I have been working on speeding up some codes in pymatgen for finding the atomic neighbors within a cutoff radius. I was searching online and found that cython is a rather powerful tool for accelerating python loops, and decided to give it a try.
A common comparison for cython is numba and I have heard many good things about it. A less common competitor is the recently released tensorflow 2.0. In fact, back in the tensorflow 1.x era, I did some simple comparisons and found that the speed was in fact faster than numpy. The new tensorflow 2.0 is boasted to be 3x faster than tensorflow 1.x, and it makes me wonder how faster would tensorflow 2.0 be for some simple computing tasks."><meta name=author content="Chi Chen"><link rel=canonical href=https://cchen.me/posts/2019-10-04-speed-comparison-among-numpy-cython-numba-and-tensorflow/><link crossorigin=anonymous href=/assets/css/stylesheet.min.1b65ce3047a2d0fb6b886926a6ef480ed288b6ca8c348854ee219d96f5189675.css integrity="sha256-G2XOMEei0PtriGkmpu9IDtKItsqMNIhU7iGdlvUYlnU=" rel="preload stylesheet" as=style><link rel=icon href=https://cchen.me/favicon.ico><link rel=apple-touch-icon href=https://cchen.me/apple-touch-icon.png><link rel=alternate hreflang=en href=https://cchen.me/posts/2019-10-04-speed-comparison-among-numpy-cython-numba-and-tensorflow/><meta name=twitter:card content="summary"><meta name=twitter:title content="Speed comparison among numpy, cython, numba and tensorflow 2.0 | Chi's blog"><meta name=twitter:description content="Speed comparison among numpy, cython, numba and tensorflow 2.0
Recently I have been working on speeding up some codes in pymatgen for finding the atomic neighbors within a cutoff radius. I was searching online and found that cython is a rather powerful tool for accelerating python loops, and decided to give it a try.
A common comparison for cython is numba and I have heard many good things about it. A less common competitor is the recently released tensorflow 2.0. In fact, back in the tensorflow 1.x era, I did some simple comparisons and found that the speed was in fact faster than numpy. The new tensorflow 2.0 is boasted to be 3x faster than tensorflow 1.x, and it makes me wonder how faster would tensorflow 2.0 be for some simple computing tasks."><meta property="og:title" content="Speed comparison among numpy, cython, numba and tensorflow 2.0 | Chi's blog"><meta property="og:description" content="Speed comparison among numpy, cython, numba and tensorflow 2.0
Recently I have been working on speeding up some codes in pymatgen for finding the atomic neighbors within a cutoff radius. I was searching online and found that cython is a rather powerful tool for accelerating python loops, and decided to give it a try.
A common comparison for cython is numba and I have heard many good things about it. A less common competitor is the recently released tensorflow 2.0. In fact, back in the tensorflow 1.x era, I did some simple comparisons and found that the speed was in fact faster than numpy. The new tensorflow 2.0 is boasted to be 3x faster than tensorflow 1.x, and it makes me wonder how faster would tensorflow 2.0 be for some simple computing tasks."><meta property="og:type" content="article"><meta property="og:url" content="https://cchen.me/posts/2019-10-04-speed-comparison-among-numpy-cython-numba-and-tensorflow/"><meta property="og:image" content="https://cchen.me/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-10-04T00:00:00+00:00"><meta property="article:modified_time" content="2019-10-04T00:00:00+00:00"><meta property="og:site_name" content="Chi's blog"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://cchen.me/posts/"},{"@type":"ListItem","position":2,"name":"Speed comparison among numpy, cython, numba and tensorflow 2.0","item":"https://cchen.me/posts/2019-10-04-speed-comparison-among-numpy-cython-numba-and-tensorflow/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Speed comparison among numpy, cython, numba and tensorflow 2.0 | Chi's blog","name":"Speed comparison among numpy, cython, numba and tensorflow 2.0","description":"Speed comparison among numpy, cython, numba and tensorflow 2.0 Recently I have been working on speeding up some codes in pymatgen for finding the atomic neighbors within a cutoff radius. I was searching online and found that cython is a rather powerful tool for accelerating python loops, and decided to give it a try.\nA common comparison for cython is numba and I have heard many good things about it. A less common competitor is the recently released tensorflow 2.0. In fact, back in the tensorflow 1.x era, I did some simple comparisons and found that the speed was in fact faster than numpy. The new tensorflow 2.0 is boasted to be 3x faster than tensorflow 1.x, and it makes me wonder how faster would tensorflow 2.0 be for some simple computing tasks.\n","keywords":["cython","numba","tensorflow","numpy"],"wordCount":"625","inLanguage":"en","datePublished":"2019-10-04T00:00:00Z","dateModified":"2019-10-04T00:00:00Z","author":[{"@type":"Person","name":"Chi Chen"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://cchen.me/posts/2019-10-04-speed-comparison-among-numpy-cython-numba-and-tensorflow/"},"publisher":{"@type":"Organization","name":"Chi's blog","logo":{"@type":"ImageObject","url":"https://cchen.me/favicon.ico"}}}</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css integrity=sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js integrity=sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){typeof renderMathInElement!="undefined"?renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1,strict:!1}):setTimeout(function(){typeof renderMathInElement!="undefined"&&renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],throwOnError:!1,strict:!1})},100)})</script><link href=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css rel=stylesheet><link href=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js></script><style>pre[class*=language-]{position:relative;margin:1em 0;padding:1em;background:#f8f8f2;border-radius:.3em;overflow:auto;border-left:4px solid #007acc}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:0 0;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,andale mono,ubuntu mono,monospace;font-size:.95em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{background:#282a36}body:not(.dark) pre[class*=language-]{background:#f6f8fa;color:#24292e;text-shadow:none;border-left:4px solid #0366d6}body:not(.dark) code[class*=language-],body:not(.dark) pre[class*=language-]{color:#24292e;text-shadow:none}body:not(.dark) .token.comment,body:not(.dark) .token.prolog,body:not(.dark) .token.doctype,body:not(.dark) .token.cdata{color:#6a737d}body:not(.dark) .token.punctuation{color:#586069}body:not(.dark) .token.property,body:not(.dark) .token.tag,body:not(.dark) .token.boolean,body:not(.dark) .token.number,body:not(.dark) .token.constant,body:not(.dark) .token.symbol,body:not(.dark) .token.deleted{color:#005cc5}body:not(.dark) .token.selector,body:not(.dark) .token.attr-name,body:not(.dark) .token.string,body:not(.dark) .token.char,body:not(.dark) .token.builtin,body:not(.dark) .token.inserted{color:#032f62}body:not(.dark) .token.operator,body:not(.dark) .token.entity,body:not(.dark) .token.url,body:not(.dark) .language-css .token.string,body:not(.dark) .style .token.string,body:not(.dark) .token.variable{color:#e36209}body:not(.dark) .token.atrule,body:not(.dark) .token.attr-value,body:not(.dark) .token.function,body:not(.dark) .token.class-name{color:#6f42c1}body:not(.dark) .token.keyword{color:#d73a49}body:not(.dark) .token.regex,body:not(.dark) .token.important{color:#e36209}div.code-toolbar{position:relative}div.code-toolbar>.toolbar{position:absolute;top:.3em;right:.2em;transition:opacity .3s ease-in-out;opacity:.7}div.code-toolbar:hover>.toolbar{opacity:1}div.code-toolbar>.toolbar>.toolbar-item>button{background:rgba(224,224,224,.2);border:0;border-radius:.5em;color:#bbb;cursor:pointer;font-size:.8em;padding:0 .5em;transition:background .3s}div.code-toolbar>.toolbar>.toolbar-item>button:hover{background:rgba(224,224,224,.4)}:not(pre)>code[class*=language-]{padding:.1em .3em;border-radius:.3em;white-space:normal}.echarts-container{width:100%;height:400px;margin:1.5em 0;border-radius:.3em;background:var(--theme)}body:not(.dark) .echarts-container{background:#fff;border:1px solid #e1e4e8}.dark .echarts-container{background:#1e1e1e;border:1px solid #333}</style><script src=https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js></script><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary-bg:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list-page{background:var(--theme)}.list-page:not(.dark)::-webkit-scrollbar-track{background:0 0}.list-page:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript></head><body class="type-posts kind-page layout-" id=top><script data-no-instant>function switchTheme(e){switch(e){case"light":document.body.classList.remove("dark");break;case"dark":document.body.classList.add("dark");break;default:window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")}}function isDarkTheme(){return document.body.className.includes("dark")}function getPrefTheme(){return localStorage.getItem("pref-theme")}function setPrefTheme(e){switchTheme(e),localStorage.setItem("pref-theme",e)}const toggleThemeCallbacks={};toggleThemeCallbacks.main=e=>{setPrefTheme(e?"light":"dark")},window.addEventListener("toggle-theme",function(){const e=isDarkTheme();for(const t in toggleThemeCallbacks)toggleThemeCallbacks[t](e)});function toggleThemeListener(){window.dispatchEvent(new CustomEvent("toggle-theme"))}</script><script>(function(){const t="auto",e=getPrefTheme(),n=e||t;switchTheme(n)})()</script><header class=header><nav class=nav><div class=logo><a href=https://cchen.me/ accesskey=h title="Chi's blog (Alt + H)">Chi's blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://cchen.me/posts/ title=Posts class=active>Posts</a></li><li><a href=https://cchen.me/search/ title="Search (Alt + /)" data-no-instant accesskey=/>Search</a></li><li><a href=https://cchen.me/tags/ title=Tags>Tags</a></li></ul></nav></header><main class="main post"><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://cchen.me/>Home</a>&nbsp;»&nbsp;<a href=https://cchen.me/posts/>Posts</a></div><h1 class=post-title>Speed comparison among numpy, cython, numba and tensorflow 2.0</h1><div class=post-meta><span class=meta-item><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>
<span>October 4, 2019</span></span><span class=meta-item>
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select:text"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z" style="user-select:text"/><line x1="7" y1="7" x2="7" y2="7" style="user-select:text"/></svg>
<span class=post-tags><a href=https://cchen.me/tags/cython/>Cython</a><a href=https://cchen.me/tags/numba/>Numba</a><a href=https://cchen.me/tags/tensorflow/>Tensorflow</a><a href=https://cchen.me/tags/numpy/>Numpy</a></span></span><span class=meta-item>
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text" style="user-select:text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z" style="user-select:text"/><polyline points="14 2 14 8 20 8" style="user-select:text"/><line x1="16" y1="13" x2="8" y2="13" style="user-select:text"/><line x1="16" y1="17" x2="8" y2="17" style="user-select:text"/><polyline points="10 9 9 9 8 9" style="user-select:text"/></svg>
<span>625 words</span></span><span class=meta-item>
<svg width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>3 min</span></span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#speed-comparison-among-numpy-cython-numba-and-tensorflow-20>Speed comparison among numpy, cython, numba and tensorflow 2.0</a><ul><li><a href=#function-decorate-to-record-time>Function decorate to record time</a></li><li><a href=#computing-functions-using-different-methods>Computing functions using different methods</a></li><li><a href=#results>Results</a></li><li><a href=#conclusion>Conclusion</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h2 id=speed-comparison-among-numpy-cython-numba-and-tensorflow-20>Speed comparison among numpy, cython, numba and tensorflow 2.0<a hidden class=anchor aria-hidden=true href=#speed-comparison-among-numpy-cython-numba-and-tensorflow-20>¶</a></h2><p>Recently I have been working on speeding up some codes in pymatgen for finding the atomic neighbors within a cutoff radius. I was searching online and found that <code>cython</code> is a rather powerful tool for accelerating python loops, and decided to give it a try.</p><p>A common comparison for <code>cython</code> is <code>numba</code> and I have heard many good things about it. A less common competitor is the recently released <code>tensorflow 2.0</code>. In fact, back in the <code>tensorflow 1.x</code> era, I did some simple comparisons and found that the speed was in fact faster than <code>numpy</code>. The new <code>tensorflow 2.0</code> is boasted to be 3x faster than <code>tensorflow 1.x</code>, and it makes me wonder how faster would <code>tensorflow 2.0</code> be for some simple computing tasks.</p><h3 id=function-decorate-to-record-time>Function decorate to record time<a hidden class=anchor aria-hidden=true href=#function-decorate-to-record-time>¶</a></h3><p>I like to do simple things myself so that I know what exactly happens in the code. So I am writing a timeit decorator instead of using <code>timeit</code> package.</p><pre><code class=language-python>from time import time
import functools

def timeit(n=10):
    &quot;&quot;&quot;
    Decorator to run function n times and print out the total time elapsed.
    &quot;&quot;&quot;
    def dec(func):
        @functools.wraps(func)
        def wrapped(*args, **kwargs):
            t0 = time()
            for i in range(n):
                func(*args, **kwargs)
            print(&quot;%s iterated %d times\nTime elapsed %.3fs\n&quot; % (
                func.__name__, n, time() - t0))
        return wrapped
    return dec
</code></pre><h3 id=computing-functions-using-different-methods>Computing functions using different methods<a hidden class=anchor aria-hidden=true href=#computing-functions-using-different-methods>¶</a></h3><p>Here I am computing</p><p>\[matrix[i, j] = i^2 + j^2\]</p><p>for a matrix of size <code>[m, n]</code></p><pre><code class=language-python># import numba, tensorflow and numpy, load cython
import numba
import tensorflow as tf
import numpy as np

%load_ext cython
</code></pre><pre><code class=language-python>@tf.function
def compute_tf(m, n):
    print('Tracing ',  m,  n)
    x1 = tf.range(0, m-1, 1) ** 2
    x2 = tf.range(0, n-1, 1) ** 2
    return x1[:, None] + x2[None, :]

compute_tf(tf.constant(1), tf.constant(1)) # trace once
</code></pre><pre><code>Tracing  Tensor(&quot;m:0&quot;, shape=(), dtype=int32) Tensor(&quot;n:0&quot;, shape=(), dtype=int32)
&lt;tf.Tensor: id=261, shape=(0, 0), dtype=int32, numpy=array([], shape=(0, 0), dtype=int32)&gt;
</code></pre><p>I used the <code>tf.function</code> decorate to define the graph and avoided repeated tracing the graph by using <code>tf.constant</code> as input and perform the initial graph tracing. You will see that running this function will not invoke the <code>print</code> function. It is only traced once</p><pre><code class=language-python>def compute_numpy(m, n):
    x1 = np.linspace(0., m-1, m) ** 2
    x2 = np.linspace(0., n-1, n) ** 2
    return x1[:, None] + x2[None, :]
</code></pre><pre><code class=language-python>@numba.njit
def compute_numba(m, n):
    x = np.empty((m, n))
    for i in range(m):
        for j in range(n):
            x[i, j] =  i**2 + j**2
    return x

compute_numba(1, 1) # JIT compile first
</code></pre><pre><code class=language-python>@numba.njit(parallel=True)
def compute_numba_parallel(m, n):
    x = np.empty((m, n))
    for i in numba.prange(m):
        for j in numba.prange(n):
            x[i, j] =  i**2 + j**2
    return x
compute_numba_parallel(1, 1) # JIT compile first
</code></pre><pre><code>array([[0.]])
</code></pre><p>Numpy and numba are almost the same. <code>numba</code> is really handy in terms of turning on parallel computations.</p><pre><code class=language-python>%%cython
cimport cython
import numpy as np
cimport numpy as np
@cython.boundscheck(False)
@cython.wraparound(False)
def compute_cython(int m, int n):
    cdef long [:, ::1] x = np.empty((m, n), dtype=int)
    cdef int i, j
    for i in range(m):
        for j in range(n):
            x[i, j] = i*i +j*j
    return x
</code></pre><p><code>cython</code> needs more work and i am delegating the memory management to <code>numpy</code> here and use <code>memoryview</code> x. Basically it is like <code>C</code>. Note that <code>cython</code> can also turn on parallel computations like <code>numba</code> by using <code>cython.parallel.prange</code>. However it does require <code>openmp</code>, which does not ship with <code>clang</code> compiler in macos. So I am not testing the parallel version here.</p><h3 id=results>Results<a hidden class=anchor aria-hidden=true href=#results>¶</a></h3><pre><code class=language-python>m = 2000
n = 10000
n_loop = 10

timeit(n=n_loop)(compute_numpy)(m, n)
timeit(n=n_loop)(compute_numba)(m, n)
timeit(n=n_loop)(compute_numba_parallel)(m, n)
timeit(n=n_loop)(compute_cython)(m, n)
timeit(n=n_loop)(compute_tf)(tf.constant(m), tf.constant(n))
</code></pre><pre><code>compute_numpy iterated 10 times
Time elapsed 0.971s

compute_numba iterated 10 times
Time elapsed 1.110s

compute_numba_parallel iterated 10 times
Time elapsed 0.651s

compute_cython iterated 10 times
Time elapsed 1.098s

compute_tf iterated 10 times
Time elapsed 0.190s
</code></pre><h3 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>¶</a></h3><p><code>Tensorflow 2.0</code> is amazing.</p></div><footer class=post-footer><nav class=paginav><a class=prev href=https://cchen.me/posts/2021-12-11-sympy-for-hamiltonian/><span class=title><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select:text"><line x1="19" y1="12" x2="5" y2="12" style="user-select:text"/><polyline points="12 19 5 12 12 5" style="user-select:text"/></svg>&nbsp;Prev Page</span><br><span>Calculating energy of 1D Schrödinger equation using Sympy</span></a></nav></footer><div class=comments-separator></div><div class=comments-box><div id=disqus_thread></div></div><script type=text/javascript>var disqus_config=function(){this.page.url="https://cchen.me/posts/2019-10-04-speed-comparison-among-numpy-cython-numba-and-tensorflow/",this.page.identifier="2019-10-04-speed-comparison-among-numpy-cython-numba-and-tensorflow"};(function(){const t=window.DISQUS;if(t)t.reset({reload:!0,config:disqus_config});else{var n=document,e=n.createElement("script");e.src="//chc273-github-io.disqus.com/embed.js",e.defer=!0,e.setAttribute("data-timestamp",+new Date),e.setAttribute("data-no-instant",""),n.head.appendChild(e)}})()</script></article></main><footer class=footer><span>&copy; 2025 <a href=https://cchen.me/>Chi's blog</a></span><span style=display:inline-block;margin-left:1em>
<a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA</a>
</span><span style=display:inline-block;margin-left:1em>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/reorx/hugo-PaperModX/ rel=noopener target=_blank>PaperModX</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>(function(){const t=""=="1";if(t)return;let e=document.getElementById("theme-toggle");e.removeEventListener("click",toggleThemeListener),e.addEventListener("click",toggleThemeListener)})()</script><script>(function(){let e=document.getElementById("menu");e&&(e.scrollLeft=localStorage.getItem("menu-scroll-position"),e.onscroll=function(){localStorage.setItem("menu-scroll-position",e.scrollLeft)});const t=""=="1",n=""=="1";if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||t||n)return;document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})})()</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>if(window.scrollListeners)for(const e of scrollListeners)window.removeEventListener("scroll",e);window.scrollListeners=[]</script><script src=/js/medium-zoom.min.js data-no-instant></script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script>(function(){const a=""=="1";if(!a)return;if(!document.querySelector(".toc")){console.log("no toc found, ignore toc scroll");return}const r=window.scrollListeners,t=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id]"),n="active";let e=t[0];o(e).classList.add(n);const c=()=>{const s=[];for(const e of t)if(l(e)<5)s.push(e);else break;s.length>0?newActiveHeading=s[s.length-1]:newActiveHeading=t[0],e!=newActiveHeading&&(o(e).classList.remove(n),e=newActiveHeading,o(e).classList.add(n))};let s=null;const i=()=>{s!==null&&clearTimeout(s),s=setTimeout(c,50)};window.addEventListener("scroll",i,!1),r.push(i);function o(e){const t=encodeURI(e.getAttribute("id")).toLowerCase();return document.querySelector(`.toc ul li a[href="#${t}"]`)}function l(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect();return t.top}})()</script></body></html>